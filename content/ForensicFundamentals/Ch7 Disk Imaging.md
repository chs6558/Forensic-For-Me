---
title: "What is Disk Imaging?"
metaTitle: "About Disk Imaging"
metaDescription: " "
---

아까 6장에서 Disk Imaging을 하여 비활성 데이터를 얻는다고 하였는데 Disk Imaging이 뭔지 이번장에서 알아보자.

**저장매체 Imaging**은 저장매체의 모든 물리적 데이터를 파일 형태로 만드는 작업을 의미한다. 저장매체 이미징을 수행하면 <u>저장매체의 첫 번째 섹터부터 마지막 섹터까지 모든 데이터가 파일 형태로 저장된다</u>. 다시 말하면, 탐색기로 확인할 수 있는 파일과 디렉터리 구조 이외에 슬랙 공간과 비할당 영역까지 모두 저장된다. 

저장매체 이미징을 하는 이유는 <u>저장매체의 원본 상태를 그대로 유지하기 위함</u>이다. 포렌식 분야에서는 원본 증거가 변조되지 않아야 하기 때문이다. 

 

**\- 저장매체 복사 vs 복제 vs 이미징**

저장매체의 변조 유무, 즉 무결성을 유지하기 위한 방안은 이미징 외에도 복제와 복사가 있다. 3가지 방식에 대해 비교해보면 다음과 같다.

|                  |    저장매체 복사    |        저장매체 복제        |       저장매체 이미징       |
| :--------------: | :-----------------: | :-------------------------: | :-------------------------: |
|    획득 대상     |   File, Directory   | 원본의 모든 physical sector | 원본의 모든 physical sector |
|    획득 결과     |   File, Directory   |       사본 저장 매체        |         image file          |
|    동작 방식     | 원본 읽기/사본 쓰기 |       bit stream 복제       |     bit stream imaging      |
| 데이터 손실 여부 |  데이터 손실 발생   |    모든 원본 데이터 획득    |    모든 원본 데이터 획득    |
| 데이터 복구 여부 |     복구 불가능     |   삭제된 데이터 복구 가능   |   삭제된 데이터 복구 가능   |

**저장 매체 복사**는 <u>획득하고자 하는 원본 파일 또는 directory를 단순히 사본 저장매체에 복사하는 방식</u>이다. 보통 Drang-and-drop을 하거나 copy 명령어를 이용한다. 이 방식은 논리적인 데이터만 복사 되기 때문에 <u>삭제된 데이터는 ‘복구할 수 없다’.</u> 또한 획득한 증거를 보호하기 위해 무결성 검증을 위한 별도의 데이터 포맷을 사용하거나 사본 저장매체 자체를 보호하는 방안이 강구되어야 한다.

**저장매체 복제**는 <u>원본 저장매체의 모든 물리적인 섹터를 사본 저장매체로 복제하는 방식</u>이다

원본의 모든 물리적 섹터가 복제되기 때문에 <u>사본 저장매체 크기는 반드시 원본 저장매체 보다커야한다.</u> 초기에는 원본 저장매체 모델과 동일한 저장매체를 사본으로 사용하는 것을 권장했지만, 모델 수급의 문제점이 있기 때문에 보통 원본보다 큰 사본 매체에 안정적으로 복제가 가능하다. 물론 복제 성능을 위해 디스크인 경우, RPM, Buffer 용량 등을 고려해줄 필요가 있다.

 

**저장매체 이미징**은 <u>원본 저장매체의 모든 물리적인 섹터를 파일 형태로 만드는 것</u>이다. 초기에는 disk dump 방식을 많이 사용했지만, 최근에는 획득한 이미지 파일의 손상을 보호하기 위해 별도의 포렌식 이미지 포맷을 사용한다. **대표적인 포렌식 이미지 포맷으로는 EWF와 AFF가 있다.** 

EWF는 **Expert Witness Compression Format** 이라는 뜻이고 AFF는 **Advanced Forensic Format**이라는 뜻이다. 포렌식 이미지 포맷을 사용하면 원본 bit stream file을 압축하여 이미지 크기를 줄이거나 암호화를 통해 데이터를 보호할 수 있다.

 

저장매체 복사 방식은 증거를 획득하는 <u>가장 기본적인 방법이지만 데이터 복구가 불가능하기 때문에 실제 포렌식 환경에서는 거의 사용되지 않는다.</u>

복제는 단순히 bit stream 복제 작업만 하기 때문에 <u>3가지 방식중에 가장 빠르다.</u> 하지만 100개의 저장매체를 분석하기 위해서는 분석 인원에 따라 100~300개 이상의 저장매체가 필요하기 때문에 효율적이지 못하다. 그리고 원본 데이터를 배포하려면 물리적인 저장매체를 전달해야 하기 때문에 실제 포렌식 환경에서는 적합하지 않다. 초기에는 저장매체 복제 방식이 많이 사용됐지만 최근의 저장매체 복제는

“현장에서 빠른 데이터 획득이 필요한 경우, **1차 획득을 위해서만 주로 사용**한다.”

1차 획득으로 복제한 저장매체는 분석의 효율성을 위해 다시 이미징을 하게 된다.

**저장매체 이미징 방식**은 현재 <u>가장 많이 사용되는 증거 획득 방식</u>이다. 원본 증거를 획득과 동시에 압축할 수 있기 때문에 사본 저장매체의 용량을 대폭 줄일 수 있다. 단일 저장매체를 분석한다면 압축 효율성이 크지 않을 수 있겠지만, 침해 사고와 같이 다수의 시스템을 분석해야 할 경우, 압축은 필수 조건이다. 포렌식 이미지는 파일 형태이기 때문에 쉽게 복사만 하여 분석가들에게 배포가 가능하다.

 

**\- 저장매체 이미징 – 소프트웨어 방식**

저장매체 이미징은 크게 **소프트웨어 방식**과 **하드웨어 방식**으로 나눌 수 있다. 소프트웨어 방식은 명칭 그대로 소프트웨어를 이용해 원본 저장매체의 모든 물리적인 섹터를 사본으로 이미징 하는 것이다. 이미징 스프트웨어는 다양하지만 주로 사용되는 것은 아래와 같다.

 

|      이름      | 인터페이스 |    플랫폼    |      제조사      | 라이선스 |
| :------------: | :--------: | :----------: | :--------------: | :------: |
|   FTK Imager   |    GUI     |    window    |    AccessData    |   free   |
| Tableau Imager |    GUI     |    window    |     TABLEAU      |   free   |
| Encase winacq  |    CLI     |    window    | GuidanceSoftware |   free   |
|    dd-like     |    CLI     | linux/window |        -         |   free   |

소프트웨어 방식으로 이미징을 할 때 주의할 점은 <u>원본 저장매체의 무결성이 훼손되지 않아야 한다</u>는 점이다. 이를 위해 원본 저장매체를 읽기 전용으로 마운트하거나 쓰기 방지 장치 (Write Blocker)를 사용한다. 쓰기 방지 장치도 소프트웨어 방식과 하드웨어 방식이 존재하지만 성능이나 안전성의 이유로 하드웨어 방식을 권장한다.

대표적인 하드웨어 쓰기 방지 장치는 아래와 같다.

|      이름       |      제조사       |           지원 인터페이스            | 라이선스 |
| :-------------: | :---------------: | :----------------------------------: | :------: |
| Forensic Bridge |      TABLEAU      | PATA, SATA ,SCSI, SAS, USB, Firewire |   상용   |
|    FastBloc     | Guidance Software | PATA, SATA ,SCSI, SAS, USB, Firewire |   상용   |
|    UltraDock    |     WiebeTech     |      PATA, SATA , USB, Firewire      |   상용   |
|   Drive Lock    |        ICS        |   PATA, SATA ,SCSI,  USB, Firewire   |   상용   |

쓰기 방지 장치는 원본 저장매체로 전달되는 쓰기 신호를 차단하여 원본의 무결성을 유지시켜주는 장비이다. 원본 저장 매체와 이미징 소프트웨어를 동작시키는 호스트 사이에 Bridge 형태로 연결한다. 

**\- 저장매체 이미징 – 하드웨어 방식**

하드웨어 방식은 이미징을 위해 특수 제작된 하드웨어 장비를 사용해 이미징하는 것이다. 소프트웨어 방식에서는 원본 저장매체의 마운트와 데이터 전송이 호스트 시스템에 의해 이루어졌다면 하드웨어 방식에서는 이 모든 작업이 <u>독립된 하드웨어 장비를 이용해 이루어진다.</u> 물론 하드웨어 장비를 구동하고 이미징하는 작업은 소프트웨어에 의해 실행되지만, 호스트 시스템을 사용하지 않는 다는 점에서 소프트웨어 방식과 구별된다. 

| 이름                 | 제조사   | 라이선스 | 특징                                                         |
| -------------------- | -------- | -------- | ------------------------------------------------------------ |
| Image MASSter Solo-4 | ICS      | 상용     | 동시에 최대 2개의 이미징/복제 가능한 휴대용 이미징/복제 장비 |
| Road MASSter         | ICS      | 상용     | 휴대성이 강화된 올인원 1:1 이미징/복제 장비                  |
| Rapid Image          | ICS      | 상용     | 동시에 최대 20개의 이미징/복제 가 가능한 대용량 장비         |
| Forensic Quest       | Logicube | 상용     | 휴대성이 강화된 제품으로 1:1 이미징/복제 장비                |
| Forensic Dossier     | Logicube | 상용     | 동시에 최대 2개의 이미징/복제가 가능한 휴대용 이미징/복제 장비 |
| OmniClone            | Logicube | 상용     | 동시에 최대 10개의 이미징/복제가 가능한 대용량 장비          |

<u>하드웨어 이미징 장비는 고가이기 때문에 쉽게 도입하기 어렵다.</u> 이런 상황에서는 쓰기 방지 장치를 구입하고 무료 소프트웨어를 사용해 이미징하는 방안이 적합하다. 한번에 여러 개의 이미지를 생성할 수는 없지만, 생성된 이미지는 파일 형태이기 때문에 쉽게 복사해 배포할 수 있다. 배포 시스템을 별도로 구축한다면 배포도 빠르게 할 수 있다. 

반면 <u>예산에 문제가 없다면 하드웨어 이미징 장비를 구입해 사용하는 것이 적합</u>하다. 모델에 따라 다르지만 하나의 원본 저장매체를 동시에 여러 개로 복제하거나 이미징하는 것이 가능하다. 게다가 대부분의 하드웨어 이미징 장비는 완전 삭제 기능도 포함하고 있기 때문에 보안 상의 중요한 데이터를 빠르게 파기해야 하는 경우 유용하게 쓰일 수 있다.

예산의 문제로 이미징 장비를 선택하는 것은 바람직하지 않다. **환경과 용도에 맞게 장비를 선택**하여야 하며, 분석대상을 확실히 하여 예산 낭비를 줄여야 한다. 

 